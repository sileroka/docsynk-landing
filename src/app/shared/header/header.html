<header class="header-container" [class.scrolled]="isScrolled">
  <div class="header-content">
    <div class="logo-section" (click)="navigateHome()">
      <img src="/docsynk_full.png" alt="DocSynk Logo" class="logo-image" />
    </div>

    <!-- Desktop Menu -->
    <p-menubar [model]="menuItems" class="main-menubar hidden lg:flex">
      <ng-template #end>
        <div class="header-actions">
          <p-button
            label="Login"
            [raised]="true"
            severity="info"
            (onClick)="navigateToLogin()"
            class="login-btn"
          />
          <p-button
            label="Start Free Trial"
            severity="success"
            (onClick)="navigateToTrial()"
            class="trial-btn"
          />
        </div>
      </ng-template>
    </p-menubar>

    <!-- Mobile Menu Icon 1 -->
    <div class="mobile-menu-toggle lg:hidden">
      <p-button
        icon="pi pi-bars"
        [text]="true"
        severity="secondary"
        (onClick)="toggleMobileMenu()"
      />
    </div>

    <!-- Mobile Menu Overlay -->
    <p-drawer
      [(visible)]="isMobileMenuVisible"
      position="right"
      [style]="{ width: '280px' }"
    >
      <ng-template pTemplate="header">
        <div class="flex align-items-center gap-2">
          <img src="/docsynk_full.png" alt="DocSynk Logo" class="mobile-logo" />
          <span class="font-bold text-xl">DocSynk</span>
        </div>
      </ng-template>

      <div class="mobile-menu-items">
        <div *ngFor="let item of menuItems" class="mobile-menu-item">
          <!-- Items without children -->
          <div *ngIf="!item.items" class="menu-link" (click)="handleMenuClick(item)">
            <i [class]="item.icon" class="menu-icon"></i>
            <span class="menu-label">{{ item.label }}</span>
          </div>
          
          <!-- Items with children (Resources) -->
          <div *ngIf="item.items" class="menu-parent">
            <div class="menu-link parent-link" (click)="toggleSubmenu(item.label)">
              <i [class]="item.icon" class="menu-icon"></i>
              <span class="menu-label">{{ item.label }}</span>
              <i [class]="isSubmenuOpen(item.label) ? 'pi pi-chevron-down' : 'pi pi-chevron-right'" class="ml-auto"></i>
            </div>
            <div *ngIf="isSubmenuOpen(item.label)" class="submenu">
              <div *ngFor="let subItem of item.items" class="menu-link submenu-link" (click)="handleMenuClick(subItem)">
                <i [class]="subItem.icon" class="menu-icon"></i>
                <span class="menu-label">{{ subItem.label }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-4 flex flex-column gap-2">
        <p-button
          label="Login"
          [outlined]="true"
          severity="secondary"
          (onClick)="navigateToLogin(); isMobileMenuVisible = false"
          class="w-full"
        />
        <p-button
          label="Start Free Trial"
          severity="success"
          (onClick)="navigateToTrial(); isMobileMenuVisible = false"
          class="w-full"
        />
      </div>
    </p-drawer>
  </div>
</header>
